CREATE TABLE USERS (
    userID INT PRIMARY KEY,
    name VARCHAR(255),
    firstName VARCHAR(255),
    lastName VARCHAR(255),
    email VARCHAR(255) UNIQUE,
    dateOfBirth DATE,
    phoneNumber VARCHAR(20),
    password VARCHAR(255),
    userType VARCHAR(50),
    nic VARCHAR(20),
    availableCredits DECIMAL(6,2),
    licenseID VARCHAR(20)
);

CREATE TABLE EMPLOYEE (
    employeeID INT PRIMARY KEY,
    userID INT,
    empType VARCHAR(50),
    FOREIGN KEY (userID) REFERENCES USERS(userID)
);

CREATE TABLE ADMIN (
    adminID INT PRIMARY KEY,
    userID INT,
    beneficiary VARCHAR(255),
    branch VARCHAR(255),
    bankAccount_Number VARCHAR(50),
    bankName VARCHAR(255),
    FOREIGN KEY (userID) REFERENCES USERS(userID)
);

CREATE TABLE BUS_OWNER (
    ownerID INT PRIMARY KEY,
    userID INT,
    nic VARCHAR(20) UNIQUE,
    beneficiary VARCHAR(255),
    branch VARCHAR(255),
    bankAccountNumber VARCHAR(50),
    bankName VARCHAR(255),
    FOREIGN KEY (userID) REFERENCES USERS(userID)
);

CREATE TABLE PASSENGER (
    passengerID INT PRIMARY KEY,
    userID INT,
    FOREIGN KEY (userID) REFERENCES USERS(userID)
);

CREATE TABLE VEHICLE (
    vehicleID INT PRIMARY KEY,
    vehicleRegNo VARCHAR(20),
    ownerID INT,
    ntcRegNo VARCHAR(20),
    noOfSeats INT,
    type VARCHAR(20),
    org VARCHAR(20),
    FOREIGN KEY (ownerID) REFERENCES BUS_OWNER(ownerID)
);

CREATE TABLE ROUTE (
    routeID INT PRIMARY KEY,
    routeNo VARCHAR(20),
    fareStage VARCHAR(255)
);

CREATE TABLE SCHEDULE (
    scheduleID INT PRIMARY KEY,
    vehicleID INT,
    routeID INT,
    departureTime TIME,
    arrivalTime TIME,
    availableSeats INT,
    FOREIGN KEY (vehicleID) REFERENCES VEHICLE(vehicleID),
    FOREIGN KEY (routeID) REFERENCES ROUTE(routeID)
);

CREATE TABLE BOOKING (
    ticketNo INT PRIMARY KEY,
    date DATE,
    scheduleID INT,
    noOfPassengers INT,
    vehicleID INT,
    routeID INT,
    driverID INT,
    conductorID INT,
    passengerID INT,
    fromLocation VARCHAR(255),
    toLocation VARCHAR(255),
    ticketPrice DECIMAL(6,2),
    FOREIGN KEY (scheduleID) REFERENCES SCHEDULE(scheduleID),
    FOREIGN KEY (vehicleID) REFERENCES VEHICLE(vehicleID),
    FOREIGN KEY (routeID) REFERENCES ROUTE(routeID),
    FOREIGN KEY (driverID) REFERENCES EMPLOYEE(employeeID),
    FOREIGN KEY (conductorID) REFERENCES EMPLOYEE(employeeID),
    FOREIGN KEY (passengerID) REFERENCES PASSENGER(passengerID)
);

CREATE TABLE TRANSACTION (
    transactionID INT PRIMARY KEY,
    userID INT,
    amount DECIMAL(6,2),
    time TIME,
    refNo VARCHAR(50),
    type VARCHAR(50),
    status VARCHAR(50),
    bankAccountNumber VARCHAR(50),
    accountBranch VARCHAR(255),
    beneficiary VARCHAR(255),
    bank VARCHAR(255),
    FOREIGN KEY (userID) REFERENCES USERS(userID)
);

CREATE TABLE OTPTABLE(
    otpID INT PRIMARY KEY,
    otp INT,
    contactNo VARCHAR(20),
    email VARCHAR(50)
);

CREATE TABLE USERLOGS(
    logID INT PRIMARY KEY,
    userID INT,
    mobile VARCHAR(20),
    device VARCHAR(10),
    os VARCHAR(10),
    browser VARCHAR(10),
    MAC VARCHAR(50),
    ip VARCHAR(50),
    date VARCHAR(50),
    time VARCHAR(50),
    country VARCHAR(20),
    longitude DECIMAL(9,6),
    latitude DECIMAL(9,6)
);

CREATE TABLE BUSSTOPNAMES(
    nameID INT PRIMARY KEY,
    name VARCHAR(255),
    longitude DECIMAL(9,6),
    latitude DECIMAL(9,6)
);

CREATE TABLE BUSSTOPLOCATIONS(
    locationID INT PRIMARY KEY,
    nameID VARCHAR(255),
    lat DECIMAL(9,6),
    lng DECIMAL(9,6),
    routeNo VARCHAR(255)
);
