CREATE TABLE USERS (
    User_ID INT PRIMARY KEY,
    Name VARCHAR(255),
    First_Name VARCHAR(255),
    Last_Name VARCHAR(255),
    Email VARCHAR(255) UNIQUE,
    Date_of_Birth DATE,
    Phone_Number VARCHAR(20),
    Password VARCHAR(255),
    User_Type VARCHAR(50),
    NIC VARCHAR(20),
    Available_Credits FLOAT,
    License_ID VARCHAR(20)
);
CREATE TABLE EMPLOYEE (
    Employee_ID INT PRIMARY KEY,
    User_ID INT,
    Emp_Type VARCHAR(50),
    FOREIGN KEY (User_ID) REFERENCES USERS(User_ID)
);

CREATE TABLE ADMIN (
    Admin_ID INT PRIMARY KEY,
    User_ID INT,
    Beneficiary VARCHAR(255),
    Branch VARCHAR(255),
    Bank_Account_Number VARCHAR(50),
    Bank_Name VARCHAR(255),
    FOREIGN KEY (User_ID) REFERENCES USERS(User_ID)
);

CREATE TABLE BUS_OWNER (
    Owner_ID INT PRIMARY KEY,
    User_ID INT,
    NIC VARCHAR(20) UNIQUE,
    Beneficiary VARCHAR(255),
    Branch VARCHAR(255),
    Bank_Account_Number VARCHAR(50),
    Bank_Name VARCHAR(255),
    FOREIGN KEY (User_ID) REFERENCES USERS(User_ID)
);

CREATE TABLE PASSENGER (
    Passenger_ID INT PRIMARY KEY,
    User_ID INT,
    FOREIGN KEY (User_ID) REFERENCES USERS(User_ID)
);


CREATE TABLE VEHICLE (
    Vehicle_Reg_No VARCHAR(20) PRIMARY KEY,
    Owner_ID INT,
    NTC_Reg_No VARCHAR(20),
    No_of_Seats INT,
    FOREIGN KEY (Owner_ID) REFERENCES BUS_OWNER(Owner_ID)
);

CREATE TABLE ROUTE (
    Route_No INT PRIMARY KEY,
    Fare_Stage VARCHAR(255)
);

CREATE TABLE SCHEDULE (
    Schedule_ID INT PRIMARY KEY,
    Vehicle_Reg_No VARCHAR(20),
    Route_No INT,
    Departure_Time TIME,
    Arrival_Time TIME,
    Available_Seats INT,
    FOREIGN KEY (Vehicle_Reg_No) REFERENCES VEHICLE(Vehicle_Reg_No),
    FOREIGN KEY (Route_No) REFERENCES ROUTE(Route_No)
);

CREATE TABLE BOOKING (
    Ticket_No INT PRIMARY KEY,
    Date DATE,
    Schedule_ID INT,
    No_of_Passengers INT,
    Vehicle_Reg_No VARCHAR(20),
    Route_No INT,
    Driver_ID INT,
    Conductor_ID INT,
    Passenger_ID INT,
    From_Location VARCHAR(255),
    To_Location VARCHAR(255),
    Ticket_Price FLOAT,
    FOREIGN KEY (Schedule_ID) REFERENCES SCHEDULE(Schedule_ID),
    FOREIGN KEY (Vehicle_Reg_No) REFERENCES VEHICLE(Vehicle_Reg_No),
    FOREIGN KEY (Route_No) REFERENCES ROUTE(Route_No),
    FOREIGN KEY (Driver_ID) REFERENCES EMPLOYEE(Employee_ID),
    FOREIGN KEY (Conductor_ID) REFERENCES EMPLOYEE(Employee_ID),
    FOREIGN KEY (Passenger_ID) REFERENCES PASSENGER(Passenger_ID)
);

CREATE TABLE TRANSACTION (
    Transaction_ID INT PRIMARY KEY,
    User_ID INT,
    Amount FLOAT,
    Time TIMESTAMP,
    Ref_No VARCHAR(50),
    Type VARCHAR(50),
    Status VARCHAR(50),
    Bank_Account_Number VARCHAR(50),
    Account_Branch VARCHAR(255),
    Beneficiary VARCHAR(255),
    Bank VARCHAR(255),
    FOREIGN KEY (User_ID) REFERENCES USERS(User_ID)
);


